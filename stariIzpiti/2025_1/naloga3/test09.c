
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga3.h"

Notranje* zgradi(int* t, int n, Notranje** element2naslov) {
    Notranje* prvo = NULL;
    Notranje* zadnje = NULL;
    for (int i = 0; i < n; i++) {
        Notranje* v = calloc(1, sizeof(Notranje));
        v->podatek = t[i];
        element2naslov[v->podatek] = v;
        if (prvo == NULL) {
            prvo = zadnje = v;
        } else {
            zadnje->desno = v;
            zadnje = zadnje->desno;
        }
    }
    return prvo;
}

void izpisiNotranje(Notranje* zacetek) {
    printf("[");
    Notranje* v = zacetek;
    while (v != NULL) {
        if (v != zacetek) {
            printf(", ");
        }
        printf("%d", v->podatek);
        v = v->desno;
    }
    printf("]");
}

void izpisiZunanje(Zunanje* glava) {
    printf("[");
    Zunanje* v = glava;
    while (v != NULL) {
        if (v != glava) {
            printf(", ");
        }
        izpisiNotranje(v->prvo);
        v = v->dol;
    }
    printf("]");
}

void pocistiNotranje(Notranje* prvo) {
    Notranje* v = prvo;
    while (v != NULL) {
        Notranje* brisi = v;
        v = v->desno;
        free(brisi);
    }
}

void pocistiZunanje(Zunanje* glava) {
    Zunanje* v = glava;
    while (v != NULL) {
        pocistiNotranje(v->prvo);
        Zunanje* brisi = v;
        v = v->dol;
        free(brisi);
    }
}

int maksimum(int* t, int n) {
    int naj = 0;
    for (int i = 0; i < n; i++) {
        if (t[i] > naj) {
            naj = t[i];
        }
    }
    return naj;
}

void preveriIstovetnost(Zunanje* glava, Notranje** element2naslov) {
    Zunanje* z = glava;
    while (z != NULL) {
        Notranje* n = z->prvo;
        while (n != NULL) {
            printf("%d", element2naslov[n->podatek] == n);
            n = n->desno;
        }
        z = z->dol;
    }
}

int TABELA[] = {1140, 8512, 5463, 5385, 9019, 1266, 7166, 2809, 3139, 3303, 7075, 7800, 7215, 5431, 439, 2447, 9802, 1824, 9809, 7743, 7209, 5829, 5043, 717, 5745, 8692, 2423, 7261, 4275, 9626, 8371, 19, 7786, 6718, 4112, 5559, 9459, 3257, 4952, 1532, 6344, 1305, 2226, 6175, 2916, 1198, 510, 1825, 6966, 7610, 2328, 3876, 7630, 8526, 7437, 9114, 4528, 4603, 2288, 9877, 6974, 1317, 4643, 3370, 5682, 2903, 8083, 4114, 6248, 2219, 5609, 6639, 9081, 3910, 4827, 7109, 8111, 7558, 3622, 5529, 6654, 4842, 815, 2277, 7716, 4071, 5407, 2531, 769, 415, 5672, 1429, 7419, 3906, 8789, 7982, 1297, 6560, 5109, 535, 2090, 7141, 9952, 7757, 2485, 8859, 361, 3130, 3638, 2788, 1293, 2468, 9979, 7337, 3452, 9457, 7167, 2095, 8279, 3240, 7140, 1839, 6721, 5089, 8922, 8460, 6366, 3040, 1194, 2006, 7135, 3003, 6245, 3277, 4934, 1222, 2990, 2725, 8965, 904, 3162, 4270, 1417, 5199, 9855, 461, 2121, 4369, 3392, 8767, 9038, 2510, 8117, 4404, 7606, 2138, 528, 2605, 6606, 8387, 6503, 9895, 9203, 9606, 9932, 2036, 353, 2221, 1021, 5318, 8267, 682, 5645, 2637, 7388, 6382, 88, 1295, 3619, 3033, 6545, 2881, 3904, 7124, 3683, 5410, 5780, 6313, 1985, 2395, 1120, 8373, 5041, 6154, 8630, 3645, 1738, 363, 4347, 771, 6025, 3583, 893, 1534, 405, 5940, 1907, 4976, 9966, 2220, 5705, 693, 7263, 2590, 4829, 4123, 3567, 5893, 2713, 7340, 4918, 1079, 2032, 4830, 7584, 1599, 7175, 7085, 1035, 2436, 6698, 491, 2061, 5287, 4346, 9841, 9839, 5361, 4582, 3454, 9780, 2898, 8832, 9988, 1296, 1435, 9970, 1711, 3671, 8897, 4764, 8623, 8142, 5699, 4220, 4838, 4685, 6085, 2770, 5772, 119, 1647, 4547, 8962, 9466, 698, 5795, 9933, 1930, 3630, 617, 4087, 5732, 8819, 7574, 6821, 4592, 7108, 38, 3260, 1517, 497, 6595, 331, 833, 6834, 5863, 8291, 5334, 6222, 7772, 2564, 8336, 4521, 7277, 2551, 9947, 5924, 2674, 1733, 5262, 9175, 5454, 7585, 9121, 4786, 2858, 5271, 5086, 8396, 4240, 7738, 4608, 6617, 7365, 1954, 1124, 5876, 6728, 2466, 1780, 8363, 3676, 8219, 767, 7654, 4575, 2762, 1666, 5227, 9216, 8529, 8761, 7455, 8119, 9982, 517, 6198, 7528, 2206, 3167, 4360, 8891, 9133, 5801, 4734, 8493, 13, 173, 1737, 4481, 5163, 2476, 2249, 2508, 7435, 6216, 6674, 7651, 4898, 4444, 5306, 5070, 5290, 639, 3031, 4635, 5577, 6166, 327, 5294, 6537, 6687, 8254, 6145, 8155, 8194, 1225, 3870, 7281, 9945, 6892, 2371, 5096, 2163, 9971, 3552, 8263, 3976, 2044, 5056, 9328, 9407, 5929, 9536, 4129, 9537, 9580, 7187, 1853, 8880, 8484, 8660, 2557, 2269, 1017, 7303, 679, 6710, 9399, 3623, 2963, 8394, 2003, 3941, 2070, 1579, 2278, 5205, 9345, 3591, 471, 2634, 2587, 7980, 6270, 1974, 9233, 270, 9916, 5267, 7466, 6035, 2584, 8238, 1116, 9099, 5316, 8113, 8521, 4449, 4614, 232, 2156, 7386, 5104, 5446, 3888, 3713, 420, 8109, 80, 9383, 8837, 9283, 9464, 1714, 8316, 3428, 2628, 4828, 5024, 572, 8777, 4886, 3901, 981, 1507, 5260, 814, 7353, 5704, 1311, 4630, 4304, 8661, 4777, 3652, 1097, 2435, 1428, 6122, 2705, 6739, 4747, 4750, 3520, 3843, 124, 1072, 6113, 5346, 2176, 2626, 4060, 8868, 4365, 8261, 7863, 2543, 8655, 154, 1080, 3354, 9632, 2852, 982, 1480, 5779, 6572, 6132, 2791, 4141, 9997, 2458, 8385, 6469, 1575, 1129, 8605, 3526, 6524, 2421, 5365, 147, 3309, 2245, 1725, 2815, 9000, 9353, 9029, 8595, 6771, 8824, 6719, 7097, 1592, 923, 9150, 1705, 3878, 8122, 5493, 485, 6569, 1315, 1766, 4120, 8266, 9746, 6449, 7550, 5180, 3362, 6726, 1916, 9592, 6066, 788, 2790, 6257, 2826, 3214, 6895, 2699, 578, 6808, 8618, 4772, 5252, 7253, 7631, 9689, 9366, 9204, 6928, 2231, 2104, 8050, 3407, 6816, 3262, 6440, 8565, 48, 2875, 4384, 3507, 787, 1746, 2467, 1679, 3011, 3387, 3201, 1384, 7811, 6835, 2922, 5207, 6504, 2345, 7233, 2261, 4154, 8683, 5426, 863, 7123, 8943, 552, 2764, 9571, 2237, 6218, 2361, 3064, 8328, 4145, 7717, 1843, 337, 9925, 4242, 1233, 757, 2386, 9726, 1831, 9258, 7012, 3853, 9316, 6455, 3095, 5905, 8383, 3675, 8915, 7715, 6779, 1584, 2378, 8770, 251, 1899, 5254, 8129, 2029, 9658, 7906, 4440, 4780, 7812, 8829, 4380, 6926, 9499, 7985, 1979, 7593, 983, 7739, 9379, 7838, 1183, 8071, 2100, 3665, 1386, 4402, 4971, 6655, 7296, 1404, 8375, 5349, 8919, 1414, 4372, 247, 9906, 574, 9430, 5573, 9297, 2128, 5748, 3690, 9942, 9245, 8765, 5292, 9290, 1504, 3097, 4067};

int main() {
    int n = sizeof(TABELA) / sizeof(int);
    int najElement = maksimum(TABELA, n);
    Notranje** element2naslov = calloc(najElement + 1, sizeof(Notranje*));

    Notranje* zacetek = zgradi(TABELA, n, element2naslov);

    printf("Vhod: ");
    izpisiNotranje(zacetek);
    printf("\n");

    Zunanje* glava = porazdeli(zacetek, 47);

    printf("Izhod: ");
    izpisiZunanje(glava);
    printf("\n");

    printf("Istovetnost vozlisc: ");
    preveriIstovetnost(glava, element2naslov);
    printf("\n");

    pocistiZunanje(glava);
    free(element2naslov);
    return 0;
}
