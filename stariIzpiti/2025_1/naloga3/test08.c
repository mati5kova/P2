
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga3.h"

Notranje* zgradi(int* t, int n, Notranje** element2naslov) {
    Notranje* prvo = NULL;
    Notranje* zadnje = NULL;
    for (int i = 0; i < n; i++) {
        Notranje* v = calloc(1, sizeof(Notranje));
        v->podatek = t[i];
        element2naslov[v->podatek] = v;
        if (prvo == NULL) {
            prvo = zadnje = v;
        } else {
            zadnje->desno = v;
            zadnje = zadnje->desno;
        }
    }
    return prvo;
}

void izpisiNotranje(Notranje* zacetek) {
    printf("[");
    Notranje* v = zacetek;
    while (v != NULL) {
        if (v != zacetek) {
            printf(", ");
        }
        printf("%d", v->podatek);
        v = v->desno;
    }
    printf("]");
}

void izpisiZunanje(Zunanje* glava) {
    printf("[");
    Zunanje* v = glava;
    while (v != NULL) {
        if (v != glava) {
            printf(", ");
        }
        izpisiNotranje(v->prvo);
        v = v->dol;
    }
    printf("]");
}

void pocistiNotranje(Notranje* prvo) {
    Notranje* v = prvo;
    while (v != NULL) {
        Notranje* brisi = v;
        v = v->desno;
        free(brisi);
    }
}

void pocistiZunanje(Zunanje* glava) {
    Zunanje* v = glava;
    while (v != NULL) {
        pocistiNotranje(v->prvo);
        Zunanje* brisi = v;
        v = v->dol;
        free(brisi);
    }
}

int maksimum(int* t, int n) {
    int naj = 0;
    for (int i = 0; i < n; i++) {
        if (t[i] > naj) {
            naj = t[i];
        }
    }
    return naj;
}

void preveriIstovetnost(Zunanje* glava, Notranje** element2naslov) {
    Zunanje* z = glava;
    while (z != NULL) {
        Notranje* n = z->prvo;
        while (n != NULL) {
            printf("%d", element2naslov[n->podatek] == n);
            n = n->desno;
        }
        z = z->dol;
    }
}

int TABELA[] = {2041, 698, 3846, 6799, 1214, 4714, 6332, 103, 5291, 7766, 7183, 4790, 4586, 6846, 5502, 3182, 4747, 8115, 4194, 3899, 1949, 8319, 3164, 645, 1373, 4595, 9059, 5627, 1177, 7783, 2832, 9252, 977, 2797, 4251, 5231, 9582, 3857, 7386, 5153, 5009, 3826, 6336, 130, 2359, 4434, 2532, 3723, 5163, 689, 6248, 6819, 6788, 652, 2030, 2586, 6158, 3362, 2904, 4160, 3465, 215, 4657, 8305, 3934, 8038, 518, 5356, 9526, 5884, 2974, 6469, 7011, 1027, 5603, 7379, 7140, 576, 6046, 3705, 7340, 5823, 6118, 2395, 2368, 2217, 9950, 7710, 1405, 9422, 5469, 9273, 7931, 5874, 2190, 8418, 4252, 7529, 3728, 3809, 6097, 4153, 846, 3749, 4030, 7497, 9637, 8187, 8513, 2476, 9634, 3129, 6699, 6223, 2850, 8888, 1331, 5191, 9973, 8533, 2216, 3851, 7776, 210, 3854, 35, 961, 7425, 7026, 4745, 937, 908, 8808, 823, 9317, 2415, 8903, 194, 7161, 9770, 4574, 8809, 4641, 1157, 8996, 8924, 700, 6050, 9830, 9302, 244, 833, 2986, 2856, 7904, 924, 1342, 7411, 7283, 9580, 2037, 152, 9692, 8585, 3543, 5954, 8708, 6816, 6609, 5504, 5987, 7606, 9497, 3711, 8818, 7173, 2842, 4161, 3412, 3956, 9798, 1184, 1476, 6581, 4401, 6617, 9145, 9037, 2605, 7556, 1713, 5870, 9246, 9222, 43, 7757, 8793, 2735, 3296, 5809, 37, 8455, 8463, 4644, 1801, 7866, 4863, 5953, 9022, 4658, 2125, 654, 2132, 9595, 2720, 1588, 7744, 6168, 1404, 4445, 7864, 2873, 33, 6526, 6113, 4744, 8898, 1810, 8159, 5891, 111, 8741, 731, 543, 5329, 5577, 3011, 1317, 5536, 5893, 8616, 9030, 5182, 8398, 9304, 9997, 5906, 4441, 5828, 109, 6210, 9106, 1558, 8453, 4348, 9321, 7356, 8211, 7119, 9405, 3903, 2305, 843, 3333, 9412, 9615, 5433, 8810, 6595, 9493, 8766, 9629, 8352, 2130, 9220, 6427, 927, 1428, 2367, 8743, 4195, 7496, 4930, 4800, 5201, 6278, 2101, 6375, 4787, 8612, 3876, 9349, 4297, 15, 431, 2401, 3107, 775, 5851, 8412, 546, 623, 8683, 3317, 5692, 9747, 5161, 8454, 5410, 6592, 7237, 7928, 2494, 3310, 192, 8792, 2525, 409, 2678, 138, 5427, 3710, 8684, 1293, 531, 5464, 1030, 6864, 1351, 9786, 1204, 7832, 1805, 9175, 6346, 5496, 2778, 4624, 1071, 382, 6905, 7462, 6921, 590, 3844, 3320, 1466, 9372, 7219, 5784, 2014, 2955, 4362, 1151, 3988, 3291, 5138, 7109, 8410, 9521, 7424, 9600, 2387, 588, 2641, 3808, 8139, 9287, 1797, 2348, 2777, 9570, 9769, 6987, 1947, 9902, 4420, 4965, 8320, 5494, 9182, 4581, 5378, 5250, 8067, 8796, 738, 8556, 3448, 304, 1707, 7272, 6235, 2615, 8190, 5358, 368, 7532, 8630, 7762, 1694, 8378, 3524, 723, 6774, 8523, 8672, 6310, 6783, 6820, 2275, 2267, 7086, 9691, 5398, 2857, 1004, 5040, 7012, 8876, 2774, 1326, 2331, 2570, 6021, 5993, 4490, 4198, 8413, 214, 5588, 3933, 6243, 5226, 1750, 4008, 5785, 1499, 2819, 5873, 7430, 175, 1615, 2970, 377, 1749, 8703, 116, 1729, 556, 7420, 1119, 6691, 1182, 7553, 139, 7448, 52, 8165, 4467, 904, 356, 7747, 7159, 8772, 7495, 8723, 2315, 9901, 1277, 8103, 9561, 1680, 9409, 7547, 4431, 9419, 365, 9162, 7294, 2244, 4579, 8897, 9282, 1470, 2670, 2737, 4276, 9975, 2443, 2075, 8782, 4898, 8843, 3108, 9627, 7372, 5386, 8042, 342, 1309, 9002, 6809, 5498, 6854, 7338, 5889, 4638, 6389, 6173, 5961, 8949, 7511, 7790, 9802, 5679, 3617, 1062, 9315, 2264, 5375, 4793, 453, 2924, 8458, 7965, 9227, 5016, 5046, 4882, 3577, 6645, 8750, 8979, 2429, 2283, 3657, 4064, 9895, 8422, 2882, 1669, 5350, 8749, 6763, 2432, 9867, 6633, 7769, 9592, 4190, 1843, 5998, 5499, 8929, 2869, 9458, 9484, 604, 4962, 310, 9251, 9962, 270, 9516, 3096, 6286, 4778, 708, 6915, 7850, 4001, 3574, 211, 8327, 4530, 5866, 5500, 5240, 2771, 3508, 5964, 119, 9197, 3185, 9467, 7280, 4222, 6169, 2704, 4884, 6899, 5725, 5088, 6675, 1297, 4921, 5609, 363, 5568, 1539, 1655, 7398, 1647, 8733, 8315, 326, 7756, 5372, 5497, 3790, 2086, 2454, 6276, 401, 2113, 1881, 2185, 5771, 4656, 1671, 7089, 3019, 5222, 7002, 3855, 9841, 2769, 3151, 4544, 8982, 2815, 5831, 4472, 7227, 6717, 2169, 8048, 2006, 5594, 376, 5207, 4664, 8826, 6632, 1150, 1711, 2733, 216, 3331, 77, 1158, 3357, 7465, 6161, 9459, 402, 9097, 2016, 777, 2880, 3329, 7004, 9476, 3881, 4281, 7672, 7731, 9776, 8721, 2239, 389, 5503, 6808, 5876, 2669, 4631, 5150, 6665, 8282, 4625, 913, 3895, 3862, 53, 9114, 3034, 2155, 7226, 1344, 8023, 4812, 1517, 7514, 5111, 3393, 5057, 8489, 6425, 2567, 4807, 5159, 1024, 1851, 6086, 3410, 268, 6515, 122, 881, 7154, 5826, 2781, 9066, 9331, 2968, 6075, 2767, 3336, 8917, 274, 3053, 5689, 8838, 8971, 804};

int main() {
    int n = sizeof(TABELA) / sizeof(int);
    int najElement = maksimum(TABELA, n);
    Notranje** element2naslov = calloc(najElement + 1, sizeof(Notranje*));

    Notranje* zacetek = zgradi(TABELA, n, element2naslov);

    printf("Vhod: ");
    izpisiNotranje(zacetek);
    printf("\n");

    Zunanje* glava = porazdeli(zacetek, 10);

    printf("Izhod: ");
    izpisiZunanje(glava);
    printf("\n");

    printf("Istovetnost vozlisc: ");
    preveriIstovetnost(glava, element2naslov);
    printf("\n");

    pocistiZunanje(glava);
    free(element2naslov);
    return 0;
}
